#!/bin/bash
#
# Session Start Hook for VoteSecure
# This hook runs automatically when Claude Code starts a new session
# It ensures the development environment is ready for code changes and testing

set -e  # Exit on error

echo "ğŸš€ Setting up VoteSecure development environment..."

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ Installing dependencies (node_modules not found)..."
    npm install
    echo "âœ… Dependencies installed successfully"
else
    echo "âœ… Dependencies already installed"
fi

# Check if package-lock.json is up to date
if [ -f "package.json" ] && [ -f "package-lock.json" ]; then
    if [ "package.json" -nt "package-lock.json" ]; then
        echo "âš ï¸  package.json is newer than package-lock.json"
        echo "ğŸ“¦ Running npm install to update dependencies..."
        npm install
    fi
fi

echo ""
echo "âœ¨ VoteSecure development environment ready!"
echo ""
echo "ğŸ“ Available commands:"
echo "   npm start     - Start dev server on port 8080 and open browser"
echo "   npm run dev   - Start dev server on port 8080"
echo ""
echo "ğŸŒ Dev server will be available at: http://localhost:8080"
echo ""
echo "ğŸ’¡ Tip: Keep 'npm run dev' running in a separate terminal while I make changes"
echo ""
